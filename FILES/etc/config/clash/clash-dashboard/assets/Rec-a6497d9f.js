import{u as p,r as c,j as e}from"./index-969cf72a.js";import{s}from"./Rec.module-c7e11c0c.js";function k(){const{t}=p(),[l,i]=c.useState("./data.csv");c.useEffect(()=>{const n=Math.floor(Date.now()/1e3);fetch(`./reckey.json?=${n}`).then(a=>a.json()).then(a=>{const r=a.reckey;if(r){const d="PaoPaoGateWay",o=JSON.parse(localStorage.getItem(d));if(o&&o.clashAPIConfigs&&o.clashAPIConfigs[0].secret){const f=o.clashAPIConfigs[0].secret,m=sha256(r+f);i(`./rec_data/${m}/data.csv`)}}else throw new Error("Invalid reckey")}).catch(a=>{console.error("Error:",a),alert(`尚未生成数据或者监控程序未启动，请确保ppgw.ini的net_rec=yes
The data has not been generated, or the monitoring program has not started. Please ensure that net_rec=yes in ppgw.ini.`),window.location.href="/ui"})},[]);function h(n){n.button===0&&(alert(`请右键点击链接并选择 '另存为' 来下载表格文件，并修改后缀为CSV。
Please right-click on the link and select 'Save As' to download the CSV.`),n.preventDefault())}return e.jsxs("div",{className:s.body,children:[" ",e.jsx("h1",{className:s.h1,children:t("netrec")}),e.jsx("h3",{className:s.h4,children:t("netrec_data_no")}),e.jsx("h3",{className:s.h3,children:t("netrec_data")}),e.jsxs("p",{children:[e.jsx("a",{href:l,id:"downloadLink",onMouseDown:h,className:s.link,children:t("downcsv")})," "]}),e.jsxs("p",{children:[e.jsx("a",{href:"./net_rec_show.html",target:"_blank",className:s.link,children:t("loadonline")})," "]})]})}export{k as default};
